}
ilayer
plot(covar_stack[[ilayer]])
plot(eez, add = T)
##################################################
####   Visual each
##################################################
par(mfrow = c(2,1),
mar = c(1,3,1,1))
for (ilayer in names(covar_stack)) {
plot(covar_stack[[ilayer]])
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
}
plot(covar_stack[[ilayer]], las = 1)
plot(eez, add = T)
##################################################
####   Visual each
##################################################
par(mfrow = c(2,1),
mar = c(2,3,1,1))
plot(covar_stack[[ilayer]], las = 1)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
for (ilayer in names(covar_stack)[1] ) {
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
}
##################################################
####   Visual each
##################################################
par(mfrow = c(2,1),
mar = c(2,3,1,1),
oma = c(2,2,0,0))
for (ilayer in names(covar_stack)[1] ) {
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
}
mtext(side = 1, text = "Longtidue")
mtext(side = 2, text = "Latitude")
for (ilayer in names(covar_stack)[1] ) {
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longtidue", outer = T)
mtext(side = 2, text = "Latitude", outer = T)
}
##################################################
####   Visual each
##################################################
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
for (ilayer in names(covar_stack)[1] ) {
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longtidue", outer = T)
mtext(side = 2, text = "Latitude", outer = T)
}
dir
for (ilayer in names(covar_stack)[1] ) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 4,
height = 6,
units = "in",
res = 500)
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longtidue", outer = T)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)[1] ) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 4,
height = 6,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longtidue", outer = T)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##############################################
####    Save Output
##############################################
saveRDS(object = covar_stack,
file = paste0(dir, "covar_stack.RDS"))
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)[1] ) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 4,
height = 6,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longtidue", outer = T)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)[1] ) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 6,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longtidue", outer = T)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)[1] ) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 5,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)[1] ) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 7,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 7,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]], las = 1, main = ilayer)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
names(covar_stack)
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 7,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]],
las = 1,
main = c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" "Standard Deviation of Sea Surface Height")[ilayer]
)
plot(eez, add = T)
plot(covar_stack_cen[[ilayer]])
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
dev.off()
plot(covar_stack[[ilayer]],
las = 1,
main = c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" "Standard Deviation of Sea Surface Height")[ilayer]
)
plot(covar_stack[[ilayer]],
las = 1,
main = c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "Standard Deviation of Sea Surface Height")[ilayer]
)
plot(covar_stack_cen[[ilayer]],
las = 1,
main = paste(c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "Standard Deviation of Sea Surface Height")[ilayer], "- Centered"))
plot(covar_stack_cen[[ilayer]],
las = 1,
main = paste(c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "Standard Deviation of Sea Surface Height")[ilayer], "-- Centered"))
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 7,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]],
las = 1,
main = c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "Standard Deviation of Sea Surface Height")[ilayer]
)
plot(eez, add = T)
plot(
covar_stack_cen[[ilayer]],
las = 1,
main = paste(
c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "Standard Deviation of Sea Surface Height")[ilayer],
"-- Centered"))
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 7,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]],
las = 1,
main = c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "StDev of Sea Surface Height")[ilayer]
)
plot(eez, add = T)
plot(
covar_stack_cen[[ilayer]],
las = 1,
main = paste( c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "StDev of Sea Surface Height")[ilayer],
"-- Centered")
)
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 7,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,1),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]],
las = 1,
main = c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "StDev of Sea Surface Height")[ilayer]
)
plot(eez, add = T)
plot(
covar_stack_cen[[ilayer]],
las = 1,
main = c(
"Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m) -- Centered",
"temp600" = "Temperature (degrees Celcius) at 600m -- Centered",
"chla" = "Chlorophyll (units?) -- Centered",
"sst" = "Sea Surface Temperature (degrees Celcius) -- Centered",
"ssh" = "Sea Surface Height (units?) -- Centered",
"ssh_sd" = "StDev of Sea Surface Height -- Centered")[ilayer]
)
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 7,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,2),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]],
las = 1,
main = c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "StDev of Sea Surface Height")[ilayer]
)
plot(eez, add = T)
plot(
covar_stack_cen[[ilayer]],
las = 1,
main = c(
"Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m) -- Centered",
"temp600" = "Temperature (degrees Celcius) at 600m -- Centered",
"chla" = "Chlorophyll (units?) -- Centered",
"sst" = "Sea Surface Temperature (degrees Celcius) -- Centered",
"ssh" = "Sea Surface Height (units?) -- Centered",
"ssh_sd" = "StDev of Sea Surface Height -- Centered")[ilayer]
)
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
source('G:/Oyafuso/whales/covariate_stack.R', echo=TRUE)
source('G:/Oyafuso/whales/covariate_stack.R', echo=TRUE)
##################################################
####   Mask stack by two criteria
####   If outside EEZ or shallower than 50 m, remove values
##################################################
covar_stack[bathy_HI > -50] <- covar_stack_cen[bathy_HI > -50] <- NA
covar_stack <- raster::mask(x = covar_stack,
mask = eez)
covar_stack_cen <- raster::mask(x = covar_stack_cen,
mask = eez)
##################################################
####   Plot covariates and centered covariates
##################################################
for (ilayer in names(covar_stack)) {
png(filename = paste0(dir, "covariate_data/", ilayer, ".png"),
width = 5,
height = 7,
units = "in",
res = 500)
par(mfrow = c(2,1),
mar = c(2,3,2,2),
oma = c(2,2,0,0))
plot(covar_stack[[ilayer]],
las = 1,
main = c("Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m)",
"temp600" = "Temperature (degrees Celcius) at 600m",
"chla" = "Chlorophyll (units?)",
"sst" = "Sea Surface Temperature (degrees Celcius)",
"ssh" = "Sea Surface Height (units?)",
"ssh_sd" = "StDev of Sea Surface Height")[ilayer]
)
plot(eez, add = T)
plot(
covar_stack_cen[[ilayer]],
las = 1,
main = c(
"Longitude" = "Longitude",
"Latitude" = "Latitude",
"bath_m" = "Bathymetry (m) -- Centered",
"temp600" = "Temperature (degrees Celcius) at 600m -- Centered",
"chla" = "Chlorophyll (units?) -- Centered",
"sst" = "Sea Surface Temperature (degrees Celcius) -- Centered",
"ssh" = "Sea Surface Height (units?) -- Centered",
"ssh_sd" = "StDev of Sea Surface Height -- Centered")[ilayer]
)
plot(eez, add = T)
mtext(side = 1, text = "Longitude", outer = T, line = 1)
mtext(side = 2, text = "Latitude", outer = T)
dev.off()
}
##############################################
####    Save Output
##############################################
saveRDS(object = covar_stack,
file = paste0(dir, "covar_stack.RDS"))
saveRDS(object = covar_stack_cen,
file = paste0(dir, "covar_stack_cen.RDS"))
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
